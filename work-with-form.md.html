<body>
    <link href="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/prism/9000.0.1/themes/prism.min.css" rel="stylesheet">

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <script src="https://cdn.bootcss.com/prism/9000.0.1/prism.min.js"></script>
    
    
    <script src="https://cdn.bootcss.com/babel-polyfill/7.0.0-alpha.20/polyfill.min.js"></script>
    <script src="https://cdn.bootcss.com/require.js/2.3.5/require.min.js"></script>
    
    <script type="es5-code">
    requirejs(['react', 'vanex', 'antd'], function (_react, _vanex, _antd) {
  'use strict';

  var _react2 = _interopRequireDefault(_react);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default: obj
    };
  }

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var _createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return call && (typeof call === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
    }

    subClass.prototype = Object.create(superClass && superClass.prototype, {
      constructor: {
        value: subClass,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var _dec, _class, _dec2, _class2;

  var FormItem = _antd.Form.Item;
  var RadioGroup = _antd.Radio.Group;

  var demoModel = {
    name: 'demoModel',
    data: {
      form: {
        country: null,
        sex: null
      },
      submitValues: null
    },

    effects: {
      setForm: function setForm(values) {
        this.form = values;
      },
      submit: function submit(values) {
        this.submitValues = values;
      }
    }
  };

  var Demo = (_dec = (0, _vanex.vanex)('demoModel')('autoSyncForm'), _dec(_class = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
      _classCallCheck(this, Demo);

      var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

      _this.form = _this.props.form;
      return _this;
    }

    // @vanex 注解第二个参数列表可以是要注册为 AutoRun 的方法，他们会自动收集依赖
    // 当 AutoRun 方法的依赖（demo 中的 this.demoModel.form）发生改变时就会被调用


    _createClass(Demo, [{
      key: 'autoSyncForm',
      value: function autoSyncForm() {
        if (this.demoModel.form) {
          // 因为访问了 demoModel.form 所以会被自动收集为依赖
          this.form.setFieldsValue(this.demoModel.form);
        }
      }
    }, {
      key: 'handleSubmit',
      value: function handleSubmit(e) {
        e.preventDefault();
        this.demoModel.submit(this.form.getFieldsValue());
      }
    }, {
      key: 'render',
      value: function render() {
        var formItemLayout = {
          labelCol: {
            span: 6
          },
          wrapperCol: {
            span: 14
          }
        };
        var _props$form = this.props.form,
            getFieldDecorator = _props$form.getFieldDecorator,
            getFieldsError = _props$form.getFieldsError,
            getFieldError = _props$form.getFieldError,
            isFieldTouched = _props$form.isFieldTouched;


        return _react2.default.createElement(
          _antd.Form,
          null,
          _react2.default.createElement(
            FormItem,
            _extends({ label: '\u56FD\u7C4D\uFF1A' }, formItemLayout),
            getFieldDecorator('country')(_react2.default.createElement(
              _antd.Select,
              {
                placeholder: '\u8BF7\u9009\u62E9\u56FD\u5BB6',
                style: { width: 200 }

              },
              _react2.default.createElement(
                'li',
                { value: 'china' },
                '\u4E2D\u56FD'
              ),
              _react2.default.createElement(
                'li',
                { value: 'use' },
                '\u7F8E\u56FD'
              ),
              _react2.default.createElement(
                'li',
                { value: 'japan' },
                '\u65E5\u672C'
              ),
              _react2.default.createElement(
                'li',
                { value: 'korean' },
                '\u97E9\u56FD'
              ),
              _react2.default.createElement(
                'li',
                { value: 'Thailand' },
                '\u6CF0\u56FD'
              )
            ))
          ),
          _react2.default.createElement(
            FormItem,
            _extends({ label: '\u6027\u522B\uFF1A', hasFeedback: true }, formItemLayout),
            getFieldDecorator('sex')(_react2.default.createElement(
              RadioGroup,
              null,
              _react2.default.createElement(
                _antd.Radio,
                { value: 'male' },
                '\u7537'
              ),
              _react2.default.createElement(
                _antd.Radio,
                { value: 'female' },
                '\u5973'
              )
            ))
          ),
          _react2.default.createElement(
            FormItem,
            { wrapperCol: { span: 16, offset: 6 } },
            _react2.default.createElement(
              _antd.Button,
              { type: 'primary', onClick: this.handleSubmit.bind(this) },
              '\u786E\u5B9A'
            )
          )
        );
      }
    }]);

    return Demo;
  }(_react2.default.Component)) || _class);
  var AnotherComponent = (_dec2 = (0, _vanex.vanex)('demoModel'), _dec2(_class2 = function (_React$Component2) {
    _inherits(AnotherComponent, _React$Component2);

    function AnotherComponent() {
      _classCallCheck(this, AnotherComponent);

      var _this2 = _possibleConstructorReturn(this, (AnotherComponent.__proto__ || Object.getPrototypeOf(AnotherComponent)).apply(this, arguments));

      _this2.handleClick = _this2.handleClick.bind(_this2);
      return _this2;
    }

    _createClass(AnotherComponent, [{
      key: 'handleClick',
      value: function handleClick() {
        this.demoModel.setForm({
          country: 'china',
          sex: 'male'
        });
      }
    }, {
      key: 'render',
      value: function render() {
        var demoModel = this.demoModel;

        return _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'h2',
            null,
            '\u53E6\u5916\u4E00\u4E2A\u7EC4\u4EF6\u901A\u8FC7 Vanex \u548C\u8868\u5355\u4EA4\u4E92'
          ),
          _react2.default.createElement(
            _antd.Button,
            { type: 'primary', onClick: this.handleClick },
            '\u8BBE\u7F6E\u8868\u5355'
          ),
          _react2.default.createElement(
            'div',
            null,
            demoModel.submitValues && demoModel.submitValues.sex ? _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement(
                'h3',
                null,
                '\u8868\u5355\u63D0\u4EA4\u7684\u6570\u636E'
              ),
              _react2.default.createElement(
                _antd.Table,
                { dataSource: [demoModel.submitValues] },
                _react2.default.createElement(_antd.Table.Column, { title: '\u56FD\u7C4D', dataIndex: 'country' }),
                _react2.default.createElement(_antd.Table.Column, { title: '\u6027\u522B', dataIndex: 'sex' })
              )
            ) : null
          )
        );
      }
    }]);

    return AnotherComponent;
  }(_react2.default.Component)) || _class2);


  var DemoComp = _antd.Form.create()(Demo);

  var Home = function (_React$Component3) {
    _inherits(Home, _React$Component3);

    function Home() {
      _classCallCheck(this, Home);

      return _possibleConstructorReturn(this, (Home.__proto__ || Object.getPrototypeOf(Home)).apply(this, arguments));
    }

    _createClass(Home, [{
      key: 'render',
      value: function render() {
        return _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'h1',
            null,
            'Vanex \u8868\u5355'
          ),
          _react2.default.createElement(DemoComp, null),
          _react2.default.createElement(AnotherComponent, null)
        );
      }
    }]);

    return Home;
  }(_react2.default.Component);

  (0, _vanex.start)({
    component: Home,
    container: '#mountNode',
    models: {
      demoModel: demoModel
    }
  });
});
    </script>
    <style>
    @import 'https://unpkg.com/antd/dist/antd.css';
    html {
        overflow-y: hidden;
    }
    #__tabs__ {
        height: 100%;
        border: none;
    }

    #__js_tab__ pre, #__css_tab__ pre {
        white-space: inherit;
    }

    #__js_tab__, #__css_tab__ {
        height: 90%;
        overflow-y: scroll;
    }
    
    #__tabs__ .ui-widget-header {
        position: fixed;
        top: 0;
        left: 0;
        border-radius: 0;
        width: 100%;
    }
    #__tabs__>div {
        margin-top: 2em;
    }
    </style> 

    <a style="position: fixed;bottom: 0px;right: 0px;z-index: 99999;" href="work-with-form.md.html" target="_blank">Open in new Tab</a>
    <div id="__tabs__">
    <ul>
      <li><a href="#__preview_tab__">Preview</a></li>
      <li><a href="#__js_tab__">JS</a></li>
      <li><a href="#__css_tab__">CSS</a></li>
    </ul>
    <div id="__preview_tab__">
    <div style="padding: 15px">
        <div id="mountNode">
        </div>
    </div>
    </div>
    <div id="__js_tab__">
    <pre>
        <code class="language-javascript">import { start, vanex } from &#39;vanex&#39;;

import { Form, Button, Radio, Select, Table } from &#39;antd&#39;;

const FormItem &#x3D; Form.Item;
const RadioGroup &#x3D; Radio.Group;

const demoModel &#x3D; {
  name: &#39;demoModel&#39;,
  data: {
    form: {
      country: null,
      sex: null,
    },
    submitValues: null,
  },

  effects: {
    setForm(values) {
      this.form &#x3D; values;
    },

    submit(values) {
      this.submitValues &#x3D; values;
    },
  },
};

@vanex(&#39;demoModel&#39;)(&#39;autoSyncForm&#39;)
class Demo extends React.Component {
  constructor(props) {
    super(props);
  	this.form &#x3D; this.props.form;
  }

  &#x2F;&#x2F; @vanex 注解第二个参数列表可以是要注册为 AutoRun 的方法，他们会自动收集依赖
	&#x2F;&#x2F; 当 AutoRun 方法的依赖（demo 中的 this.demoModel.form）发生改变时就会被调用
  autoSyncForm() {
    if (this.demoModel.form) {
      &#x2F;&#x2F; 因为访问了 demoModel.form 所以会被自动收集为依赖
      this.form.setFieldsValue(this.demoModel.form);
    }
  }

  handleSubmit(e) {
    e.preventDefault();
    this.demoModel.submit(this.form.getFieldsValue());
  }

  render() {
    const formItemLayout &#x3D; {
      labelCol: {
        span: 6,
      },
      wrapperCol: {
        span: 14,
      },
    };
    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched } &#x3D; this.props.form;


    return (
      &lt;Form&gt;
        &lt;FormItem label&#x3D;&quot;国籍：&quot; {...formItemLayout}&gt;
          {getFieldDecorator(&#39;country&#39;)(
          &lt;Select
            placeholder&#x3D;&quot;请选择国家&quot;
            style&#x3D;{{ width: 200 }}
            
          &gt;
            &lt;li value&#x3D;&quot;china&quot;&gt;中国&lt;&#x2F;li&gt;
            &lt;li value&#x3D;&quot;use&quot;&gt;美国&lt;&#x2F;li&gt;
            &lt;li value&#x3D;&quot;japan&quot;&gt;日本&lt;&#x2F;li&gt;
            &lt;li value&#x3D;&quot;korean&quot;&gt;韩国&lt;&#x2F;li&gt;
            &lt;li value&#x3D;&quot;Thailand&quot;&gt;泰国&lt;&#x2F;li&gt;
          &lt;&#x2F;Select&gt;
            )}
        &lt;&#x2F;FormItem&gt;

        &lt;FormItem label&#x3D;&quot;性别：&quot; hasFeedback {...formItemLayout}&gt;
          {getFieldDecorator(&#39;sex&#39;)(
          &lt;RadioGroup 
          &gt;
            &lt;Radio value&#x3D;&quot;male&quot;&gt;男&lt;&#x2F;Radio&gt;
            &lt;Radio value&#x3D;&quot;female&quot;&gt;女&lt;&#x2F;Radio&gt;
          &lt;&#x2F;RadioGroup&gt;
            )}
        &lt;&#x2F;FormItem&gt;

        &lt;FormItem wrapperCol&#x3D;{{ span: 16, offset: 6 }}&gt;
          &lt;Button type&#x3D;&quot;primary&quot; onClick&#x3D;{this.handleSubmit.bind(this)}&gt;
            确定
          &lt;&#x2F;Button&gt;
        
        &lt;&#x2F;FormItem&gt;
      &lt;&#x2F;Form&gt;
    );
  }
}

@vanex(&#39;demoModel&#39;)
class AnotherComponent extends React.Component {
  constructor() {
    super(...arguments);
    this.handleClick &#x3D; this.handleClick.bind(this);
  }
  handleClick() {
    this.demoModel.setForm({
      country: &#39;china&#39;,
      sex: &#39;male&#39;,
    });
  }
  render() {
    const { demoModel } &#x3D; this;
    return (
      &lt;div&gt;
        &lt;h2&gt;另外一个组件通过 Vanex 和表单交互&lt;&#x2F;h2&gt;
        &lt;Button type&#x3D;&quot;primary&quot; onClick&#x3D;{this.handleClick}&gt;
          设置表单
        &lt;&#x2F;Button&gt;
        &lt;div&gt;
          {demoModel.submitValues &amp;&amp; demoModel.submitValues.sex
            ? &lt;div&gt;
              	&lt;h3&gt;表单提交的数据&lt;&#x2F;h3&gt;
              	&lt;Table dataSource&#x3D;{[demoModel.submitValues]}&gt;
                	&lt;Table.Column title&#x3D;&quot;国籍&quot; dataIndex&#x3D;&quot;country&quot; &#x2F;&gt;
                	&lt;Table.Column title&#x3D;&quot;性别&quot; dataIndex&#x3D;&quot;sex&quot; &#x2F;&gt;
              	&lt;&#x2F;Table&gt;
              &lt;&#x2F;div&gt;
            : null}
        &lt;&#x2F;div&gt;
      &lt;&#x2F;div&gt;
    );
  }
}

const DemoComp &#x3D; Form.create()(Demo);

class Home extends React.Component {
  render() {
    return (
      &lt;div&gt;
        &lt;h1&gt;Vanex 表单&lt;&#x2F;h1&gt;
        &lt;DemoComp &#x2F;&gt;
        &lt;AnotherComponent &#x2F;&gt;
      &lt;&#x2F;div&gt;
    );
  }
}

start({
  component: Home,
  container: &#39;#mountNode&#39;,
  models: {
    demoModel,
  },
});
</code>
    </pre>
    </div>
    <div id="__css_tab__">
    <pre>
        <code class="language-css">@import &#39;antd&#x2F;dist&#x2F;antd.css&#39;;</code>
    </pre>
    </div>
  </div>
    <script>
        $( function() {
            $('#__tabs__').tabs();
        } );
        window.mountNode = document.getElementById('mountNode');
        var paths = {
            'react': 'https://cdn.bootcss.com/react/16.0.0-beta.5/umd/react.production.min',
            'react-dom': 'https://cdn.bootcss.com/react/15.6.1/react-dom.min',
            'vanex': 'https://unpkg.com/vanex/lib/vanex.pack.min',
            'antd': 'https://cdn.bootcss.com/antd/3.0.0-alpha0/antd.min',
            'mobx': 'https://cdn.bootcss.com/mobx/3.2.2/mobx.umd.min',
            'redux': 'https://cdn.bootcss.com/redux/3.7.2/redux.min',
            'dva': 'https://unpkg.com/dva@2.0.1/dist/dva-min',
        };
        requirejs.config({
            // module name mapped to CDN url
            paths: paths,
        });

        var load = requirejs.load;
        requirejs.load = function (context, moduleId, url) {
            if (moduleId in paths) {
            } else {
                url = `https://unpkg.com/${moduleId}`;
            }
            return load(context, moduleId, url);
        };

        
        var blocks = document.querySelectorAll('[type="es5-code"]');
        window.require = requirejs;
        function evalCode(code) {
            eval(code);
        }
        
        blocks.forEach(block => {
          const code = block.innerText;
          evalCode(code);
        })

    </script> 
    </body>